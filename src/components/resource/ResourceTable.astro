---
// src/components/resource/ResourceTable.astro
import type { Props as CardProps } from "./ResourceCard.astro";
import IconifyIcon from "../IconifyIcon.vue";

export interface Props {
  title: string;
  documents: CardProps[];
}

const { title, documents } = Astro.props;
---

<section class="container mx-auto px-4 py-8">
  <h2 class="text-2xl md:text-3xl font-bold mb-6">{title}</h2>
  <div class="flex flex-col">
    <!-- Header -->
    <div
      class="hidden md:flex items-center justify-between gap-4 px-6 py-3 border-b-2 border-base-content/10 text-base-content/60 font-semibold"
    >
      <div class="flex-1">ชื่อเอกสาร</div>
      <div class="w-32 text-center">หมวดหมู่</div>
      <div class="w-24 text-center">ประเภท</div>
      <div class="w-24 text-center">ขนาด</div>
      <div class="w-32 text-center">วันที่</div>
      <div class="w-36 text-center">การดำเนินการ</div>
    </div>
    <!-- Rows -->
    <div class="space-y-3 mt-3">
      {
        documents.map((doc) => (
          <div class="rainbow-border-wrapper">
            <div class="flex flex-col md:flex-row md:items-center gap-4 p-4 rounded-lg bg-base-200 border border-transparent transition-colors duration-300">
              {/* Main Info */}
              <div class="flex-1 flex items-center gap-4">
                <IconifyIcon
                  icon="material-symbols:docs"
                  className="h-8 w-8 text-primary flex-shrink-0"
                  client:visible
                />
                <div>
                  <p class="font-bold text-base-content">{doc.title}</p>
                  <p class="text-sm text-base-content/70 md:hidden mt-1">
                    {doc.tag} • {doc.fileType} • {doc.size} • {doc.date}
                  </p>
                </div>
              </div>

              {/* Desktop Columns */}
              <div class="hidden md:flex items-center gap-4">
                <div class="w-32 text-center">
                  <div class="badge badge-accent truncate">{doc.tag}</div>
                </div>
                <div class="w-24 text-center">{doc.fileType}</div>
                <div class="w-24 text-center">{doc.size}</div>
                <div class="w-32 text-center">{doc.date}</div>
              </div>

              {/* view button */}
              <div class="w-full md:w-36 flex justify-end md:justify-center">
                <a href={doc.viewUrl} class="btn btn-primary w-full md:w-auto">
                  ดู
                  <IconifyIcon
                    icon="mdi:eye"
                    className="h-5 w-5"
                    client:visible
                  />
                </a>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<style>
  @property --angle {
    syntax: "<angle>";
    initial-value: 0deg;
    inherits: false;
  }

  .rainbow-border-wrapper {
    position: relative;
    z-index: 1;
    border-radius: 0.5rem; /* Corresponds to rounded-lg */
  }

  .rainbow-border-wrapper::before,
  .rainbow-border-wrapper::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: -1;
    width: 100%;
    height: 100%;
    border-radius: inherit;
    background-image: conic-gradient(
      from var(--angle),
      #ff4545,
      #00ff99,
      #006aff,
      #ff0095,
      #ff4545
    );
    opacity: 0;
    transition: opacity 300ms ease-in-out;
    animation: 3s spin linear infinite;
  }

  .rainbow-border-wrapper::before {
    filter: blur(0.5rem);
    width: calc(100% + 8px);
    height: calc(100% + 8px);
  }

  .rainbow-border-wrapper:hover::after {
    opacity: 1;
  }

  .rainbow-border-wrapper:hover::before {
    opacity: 0.75;
  }

  .rainbow-border-wrapper:hover > div {
    border-color: transparent; /* Hide original border on hover */
  }

  @keyframes spin {
    from {
      --angle: 0deg;
    }
    to {
      --angle: 360deg;
    }
  }
</style>
